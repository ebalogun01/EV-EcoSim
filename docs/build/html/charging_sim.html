<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Charging Sim &mdash; EV-EcoSim 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Battery System Identification" href="batt_sys_identification.html" />
    <link rel="prev" title="Packages" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            EV-EcoSim
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Introduction/welcome.html">Introduction</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme/README.html">Readme</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/tutorial.html">Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Packages</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Charging Sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim">Module contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.battery">Battery module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.batteryAgingSim">Battery Aging Sim module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.batterypack">Battery pack module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.capacitor">Capacitor module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.chargingStation">Charging Station module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.clock">Clock module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.controller">Controller module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.electricityPrices">Electricity prices module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.node">Node module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.optimization">Optimization module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.orchestrator">Orchestrator module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.simulate">Simulate module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.solar">Solar module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.transformer">Transformer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-charging_sim.utils">Utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batt_sys_identification.html">Battery System Identification</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_cases.html">Test cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="analysis.html">Post-simulation Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html">App - runs the platform</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">EV-EcoSim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">Packages</a></li>
      <li class="breadcrumb-item active">Charging Sim</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="charging-sim">
<h1>Charging Sim<a class="headerlink" href="#charging-sim" title="Permalink to this heading"></a></h1>
<section id="module-charging_sim">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-charging_sim" title="Permalink to this heading"></a></h2>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-charging_sim.battery">
<span id="battery-module"></span><h2>Battery module<a class="headerlink" href="#module-charging_sim.battery" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.battery.Battery">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.battery.</span></span><span class="sig-name descname"><span class="pre">Battery</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Each instantiation of this class must include at least a config file, which contains the physical
constraints and properties of the battery.</p>
<dl class="simple">
<dt>Properties are mainly controlled in the battery config file ‘battery.json’</dt><dd><ul class="simple">
<li><p>max-c-rate - determines the power capacity of the cell as a multiple of the value of the energy capacity.</p></li>
<li><p>max voltage(V) - maximum allowable battery voltage.</p></li>
<li><p>min Voltage (V) - minimum allowable battery voltage.</p></li>
<li><p>nominal energy (kWh) - energy deliverable to the battery.</p></li>
<li><p>id (-).</p></li>
<li><p>Ambient temperature (Celsius).</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>battery_type</strong> – Type of battery (inconsequential to current dynamics).</p></li>
<li><p><strong>node</strong> – The node_name/bus in the distribution network in which the battery resides.</p></li>
<li><p><strong>self.config</strong> – Battery configuration file containing the main attributes of the battery.</p></li>
<li><p><strong>controller</strong> – Controller for the battery.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Battery object.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.battery_setup">
<span class="sig-name descname"><span class="pre">battery_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.battery_setup" title="Permalink to this definition"></a></dt>
<dd><p>This sets up the series-parallel configuration of the cells,
given the capacity and voltage of the battery. Scales up Ah capacity, not voltage. Voltage in this setup is
fixed by the battery json file while the Ah capacity is floating and determined by the given pack voltage and
Energy Capacity.</p>
<ul class="simple">
<li><p>Energy capacity (Wh).</p></li>
<li><p>Voltage (V).</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None. Updates battery topology.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.battery_setup_2">
<span class="sig-name descname"><span class="pre">battery_setup_2</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.battery_setup_2" title="Permalink to this definition"></a></dt>
<dd><p>Scales up voltage instead of current capacity (Ah), thereby using more cells in series
for the same battery energy rating. pack_max_AH property is set in config and fixed. Voltage is determined
by the pack energy capacity (Watt-hours) and the maximum amp-hour capacity.</p>
<ul class="simple">
<li><p>Capacity (Wh).</p></li>
<li><p>cell_amp_hrs (Ah), cell_voltage (V)</p></li>
</ul>
<p>:param : None.
:return : None. Updates battery topology.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.dynamics">
<span class="sig-name descname"><span class="pre">dynamics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.dynamics" title="Permalink to this definition"></a></dt>
<dd><p>Propagates the state of the battery forward one step.
It takes as input current load (amperes) from the Battery controller and update the battery power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>current</strong> (<em>float</em><em> or </em><em>np.float</em><em>(</em><em>)</em><em>.</em>) – Battery cycle current in amperes.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Battery response voltage.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.est_calendar_aging">
<span class="sig-name descname"><span class="pre">est_calendar_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.est_calendar_aging" title="Permalink to this definition"></a></dt>
<dd><p>Estimates the constant calendar aging of the battery. this is solely time-dependent.
Deprecate this later for this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Linear calendar aging result.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.est_cyc_aging">
<span class="sig-name descname"><span class="pre">est_cyc_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.est_cyc_aging" title="Permalink to this definition"></a></dt>
<dd><p>Creates linear battery ageing model per hesse. et. Al, and returns its cvx object.
Deprecate this later for this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>CVXPY objective describing cycle aging function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_OCV">
<span class="sig-name descname"><span class="pre">get_OCV</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_OCV" title="Permalink to this definition"></a></dt>
<dd><p>Uses the Open Circuit Voltage (OCV) Map stored within the battery object to any OCV for any state-of-charge
SoC via interpolation.
The OCV-SOC map is obtained a-priori (pre-simulation).</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Open Circuit Voltage (OCV) at battery’s current SoC.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_Ro">
<span class="sig-name descname"><span class="pre">get_Ro</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_Ro" title="Permalink to this definition"></a></dt>
<dd><p>This can be updated later to include current…
Deprecate this possibly</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_aging_value">
<span class="sig-name descname"><span class="pre">get_aging_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_aging_value" title="Permalink to this definition"></a></dt>
<dd><p>Returns the total capacity life loss the battery has experienced so far.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Estimated cycle + calendar aging of cell/battery.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_power_profile">
<span class="sig-name descname"><span class="pre">get_power_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">months</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_power_profile" title="Permalink to this definition"></a></dt>
<dd><p>Returns the power profile of the battery for a certain number of months.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>months</strong> – Months for which to obtain power profile.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dictionary of power profiles for each month in months.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_properties">
<span class="sig-name descname"><span class="pre">get_properties</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_properties" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_roundtrip_efficiency">
<span class="sig-name descname"><span class="pre">get_roundtrip_efficiency</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_roundtrip_efficiency" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_total_aging">
<span class="sig-name descname"><span class="pre">get_total_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_total_aging" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.get_true_power">
<span class="sig-name descname"><span class="pre">get_true_power</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.get_true_power" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.save_sim_data">
<span class="sig-name descname"><span class="pre">save_sim_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.save_sim_data" title="Permalink to this definition"></a></dt>
<dd><p>Saves all relevant battery data over the given simulation. Usually called from the battery object
upon conclusion of simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>save_prefix</strong> (<em>str.</em>) – desired folder in which all the files will be saved.</p>
</dd>
</dl>
<p>:return : None, saves output files in the desired folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.save_states">
<span class="sig-name descname"><span class="pre">save_states</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.save_states" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.state_eqn">
<span class="sig-name descname"><span class="pre">state_eqn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.state_eqn" title="Permalink to this definition"></a></dt>
<dd><p>Contains discretized state equations containing the battery dynamics at the pack-level;
ref here: G. L. Plett, Battery management systems, Volume I: Battery modeling. Artech House, 2015, vol. 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>append</strong> (<em>boolean</em>) – Decides if to track powers within the ::B battery object.</p></li>
<li><p><strong>current</strong> (<em>float</em>) – Current - current in amperes from controller to propagate state forward by one step.
append - defaults to True. This decides tracking of currents and power over time. Desirable for post-
optimization analyses.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None; appends current state into the state history vectors.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.thermal_dynamics">
<span class="sig-name descname"><span class="pre">thermal_dynamics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.thermal_dynamics" title="Permalink to this definition"></a></dt>
<dd><p>Not Implemented yet. Future work.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.track_SOC">
<span class="sig-name descname"><span class="pre">track_SOC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SOC</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.track_SOC" title="Permalink to this definition"></a></dt>
<dd><p>Updates the states of charge state Vector of the battery.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>SOC - state of charge. This is a self-called function.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.update_SOC">
<span class="sig-name descname"><span class="pre">update_SOC</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.update_SOC" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.update_capacity">
<span class="sig-name descname"><span class="pre">update_capacity</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.update_capacity" title="Permalink to this definition"></a></dt>
<dd><p>This is not true capacity but anticipated capacity based on linear model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.update_max_current">
<span class="sig-name descname"><span class="pre">update_max_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.update_max_current" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.update_params">
<span class="sig-name descname"><span class="pre">update_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.update_params" title="Permalink to this definition"></a></dt>
<dd><p>This changes the battery params depending on the number of cycles</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.update_voltage">
<span class="sig-name descname"><span class="pre">update_voltage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">voltage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.update_voltage" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.battery.Battery.visualize">
<span class="sig-name descname"><span class="pre">visualize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.Battery.visualize" title="Permalink to this definition"></a></dt>
<dd><p>method is used to plot and save battery states desired by user</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.battery.test">
<span class="sig-prename descclassname"><span class="pre">charging_sim.battery.</span></span><span class="sig-name descname"><span class="pre">test</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.battery.test" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-charging_sim.batteryAgingSim">
<span id="battery-aging-sim-module"></span><h2>Battery Aging Sim module<a class="headerlink" href="#module-charging_sim.batteryAgingSim" title="Permalink to this heading"></a></h2>
<p>This module contains the BatteryAging class. The battery aging objects enact on the battery object and update the
battery capacity and resistance at each simulation time-step.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.batteryAgingSim.</span></span><span class="sig-name descname"><span class="pre">BatteryAging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datetime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Current aging model is for LiNiMnCoO2 (NMC) battery cells. More aging models will be added in the future.</p>
<p>Link to Paper: <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S0378775314001876">https://www.sciencedirect.com/science/article/pii/S0378775314001876</a></p>
<dl class="simple">
<dt>Default Params from paper:</dt><dd><ul class="simple">
<li><p>beta_cap: capacity fade aging factor for cycle aging</p></li>
<li><p>alpha_cap capacity fade aging factor for calendar aging</p></li>
<li><p>beta_res: resistance growth aging factor for cycle aging</p></li>
<li><p>alpha_res: resistance growth aging factor for calendar aging</p></li>
</ul>
</dd>
<dt>Assumptions:</dt><dd><ul class="simple">
<li><p>Homogenous battery with dynamics modelled.</p></li>
<li><p>Uniform aging across all cells.</p></li>
<li><p>Constant temperature profile in vicinity of battery.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.LFP_cal_aging">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LFP_cal_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.LFP_cal_aging" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.LFP_cyc_aging">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LFP_cyc_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.LFP_cyc_aging" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.NMC_cal_aging">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">NMC_cal_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.NMC_cal_aging" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.NMC_cyc_aging">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">NMC_cyc_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.NMC_cyc_aging" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.get_aging_value">
<span class="sig-name descname"><span class="pre">get_aging_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.get_aging_value" title="Permalink to this definition"></a></dt>
<dd><p>Returns the total capacity fade and resistance growth of the battery object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>battery</strong> – The battery (pack) object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of total capacity fade and resistance growth of the battery.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.get_calendar_aging">
<span class="sig-name descname"><span class="pre">get_calendar_aging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.get_calendar_aging" title="Permalink to this definition"></a></dt>
<dd><p>Returns the calendar aging of the battery object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>battery</strong> – The battery object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple of capacity fade and resistance growth due to calendar aging.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.get_cyc_aging">
<span class="sig-name descname"><span class="pre">get_cyc_aging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.get_cyc_aging" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the resistance growth and capacity fade from cycle aging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>battery</strong> – THe batt</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.get_total_aging">
<span class="sig-name descname"><span class="pre">get_total_aging</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.get_total_aging" title="Permalink to this definition"></a></dt>
<dd><p>Returns the total capacity fade of the battery object. This includes both cycle and calendar aging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>battery</strong> (<em>object</em>) – The battery (pack) object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Total calendar + cycle aging of the battery.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.run" title="Permalink to this definition"></a></dt>
<dd><p>Runs the aging model for the battery object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>battery</strong> – The battery (pack) object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None. Updates the battery object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.update_capacity">
<span class="sig-name descname"><span class="pre">update_capacity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.update_capacity" title="Permalink to this definition"></a></dt>
<dd><p>Updates the capacity of the battery based on the aging model adopted from Schmalsteig Et. Al.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>battery</strong> – Battery object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None. Updates the battery object capacity.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batteryAgingSim.BatteryAging.update_resistance">
<span class="sig-name descname"><span class="pre">update_resistance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batteryAgingSim.BatteryAging.update_resistance" title="Permalink to this definition"></a></dt>
<dd><p>Updates the resistance of the battery based on the aging model adopted from Schmalsteig Et. Al.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>battery</strong> – Battery object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None. Updates the battery object resistance.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.batterypack">
<span id="battery-pack-module"></span><h2>Battery pack module<a class="headerlink" href="#module-charging_sim.batterypack" title="Permalink to this heading"></a></h2>
<p><strong>Overview</strong></p>
<p>Module for the battery pack class. This module contains the class that loads the battery pack data and structure used
for simulation. The battery pack is composed of individual cells, which are connected in series and parallel to
achieve the desired voltage and capacity.</p>
<p><strong>Example usage</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">battery_config_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
   <span class="n">battery_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
   <span class="n">params_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">battery_config</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="s2">&quot;params_&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">]</span>
</pre></div>
</div>
<p>Then the battery can be instantiated as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">params_key</span> <span class="ow">in</span> <span class="n">params_list</span><span class="p">:</span>
   <span class="c1"># This loads the actual battery parameters from the file in which those parameters are stored, prior to</span>
   <span class="c1"># instantiating Battery().</span>
   <span class="n">battery_config</span><span class="p">[</span><span class="n">params_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">path_prefix</span> <span class="o">+</span> <span class="n">battery_config</span><span class="p">[</span><span class="n">params_key</span><span class="p">])</span>
   <span class="c1"># Instantiate the battery using its constructor.</span>
   <span class="n">buffer_battery</span> <span class="o">=</span> <span class="n">Battery</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">battery_config</span><span class="p">,</span> <span class="n">controller</span><span class="o">=</span><span class="n">controller</span><span class="p">)</span> <span class="c1"># controller is the controller for battery</span>
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.batterypack.</span></span><span class="sig-name descname"><span class="pre">Battery</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Each instantiation of this class must include at least a config file, which contains the physical
constraints and properties of the battery.</p>
<dl class="simple">
<dt>Properties are mainly controlled in the battery config file <cite>battery.json</cite></dt><dd><ul class="simple">
<li><p>max-c-rate - determines the power capacity of the cell as a multiple of the value of the energy capacity.</p></li>
<li><p>max voltage(V) - maximum allowable battery voltage.</p></li>
<li><p>min Voltage (V) - minimum allowable battery voltage.</p></li>
<li><p>nominal energy (kWh) - energy deliverable to the battery.</p></li>
<li><p>id (-).</p></li>
<li><p>Ambient temperature (Celsius).</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>battery_type</strong> – Type of battery (inconsequential to current dynamics).</p></li>
<li><p><strong>node</strong> – The node_name/bus in the distribution network in which the battery resides.</p></li>
<li><p><strong>config</strong> – Battery configuration file containing the main attributes of the battery.</p></li>
<li><p><strong>controller</strong> – Controller for the battery.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Battery object.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.R_pack">
<span class="sig-name descname"><span class="pre">R_pack</span></span><a class="headerlink" href="#charging_sim.batterypack.Battery.R_pack" title="Permalink to this definition"></a></dt>
<dd><p>Overall pack resistance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.battery_setup">
<span class="sig-name descname"><span class="pre">battery_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.battery_setup" title="Permalink to this definition"></a></dt>
<dd><p>This sets up the series-parallel configuration of the cells,
given the capacity and voltage of the battery. Scales up Ah capacity, not voltage. Voltage in this setup is
fixed by the battery json file while the Ah capacity is floating and determined by the given pack voltage and
Energy Capacity.</p>
<ul class="simple">
<li><p>Energy capacity (Wh).</p></li>
<li><p>Voltage (V).</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None. Updates battery topology.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.battery_setup_2">
<span class="sig-name descname"><span class="pre">battery_setup_2</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.battery_setup_2" title="Permalink to this definition"></a></dt>
<dd><p>Scales up voltage instead of current capacity (Ah), thereby using more cells in series
for the same battery energy rating. pack_max_AH property is set in config and fixed. Voltage is determined
by the pack energy capacity (Watt-hours) and the maximum amp-hour capacity.</p>
<ul class="simple">
<li><p>Capacity (Wh).</p></li>
<li><p>cell_amp_hrs (Ah), cell_voltage (V)</p></li>
</ul>
<p>:param : None.
:return : None. Updates battery topology.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.battery_type">
<span class="sig-name descname"><span class="pre">battery_type</span></span><a class="headerlink" href="#charging_sim.batterypack.Battery.battery_type" title="Permalink to this definition"></a></dt>
<dd><p>Initial value: None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.config">
<span class="sig-name descname"><span class="pre">config</span></span><a class="headerlink" href="#charging_sim.batterypack.Battery.config" title="Permalink to this definition"></a></dt>
<dd><p>Initial value: None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.controller">
<span class="sig-name descname"><span class="pre">controller</span></span><a class="headerlink" href="#charging_sim.batterypack.Battery.controller" title="Permalink to this definition"></a></dt>
<dd><p>Initial value: None.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.dynamics">
<span class="sig-name descname"><span class="pre">dynamics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.dynamics" title="Permalink to this definition"></a></dt>
<dd><p>Propagates the state of the battery forward one step.
It takes as input current load (amperes) from the Battery controller and update the battery power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>current</strong> (<em>float</em><em> or </em><em>np.float</em><em>(</em><em>)</em><em>.</em>) – Battery cycle current in amperes.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Battery response voltage.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Float.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.est_calendar_aging">
<span class="sig-name descname"><span class="pre">est_calendar_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.est_calendar_aging" title="Permalink to this definition"></a></dt>
<dd><p>Estimates the constant calendar aging of the battery. this is solely time-dependent.
Deprecate this later for this object.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Return sum(aging_cal)<span class="colon">:</span></dt>
<dd class="field-even"><p>Linear aging result.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.est_cyc_aging">
<span class="sig-name descname"><span class="pre">est_cyc_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.est_cyc_aging" title="Permalink to this definition"></a></dt>
<dd><p>Creates linear battery ageing model per hesse. et. Al, and returns its cvx object.
Deprecate this later for this object.</p>
<p>:param : None.
:return cycle aging: CVXPY objective describing cycle aging function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.get_OCV">
<span class="sig-name descname"><span class="pre">get_OCV</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.get_OCV" title="Permalink to this definition"></a></dt>
<dd><p>Uses the Open Circuit Voltage (OCV) Map stored within the battery object to any OCV for any state-of-charge
SoC via interpolation.
The OCV-SOC map is obtained a-priori (pre-simulation).</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Open Circuit Voltage (OCV) at battery’s current SoC.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.get_aging_value">
<span class="sig-name descname"><span class="pre">get_aging_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.get_aging_value" title="Permalink to this definition"></a></dt>
<dd><p>Returns the actual aging value lost after a cvxpy run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Cycle aging + Calendar aging.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.get_power_profile">
<span class="sig-name descname"><span class="pre">get_power_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">months</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.get_power_profile" title="Permalink to this definition"></a></dt>
<dd><p>Returns the power profile of the battery for a certain number of months.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>months</strong> – Months for which to obtain power profile.</p>
</dd>
</dl>
<p>Returns: Dictionary of power profiles for each month in months.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.get_roundtrip_efficiency">
<span class="sig-name descname"><span class="pre">get_roundtrip_efficiency</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.get_roundtrip_efficiency" title="Permalink to this definition"></a></dt>
<dd><p>Returns the estimated round-trip efficiency.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns boolean<span class="colon">:</span></dt>
<dd class="field-odd"><p>self._eff</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.get_total_aging">
<span class="sig-name descname"><span class="pre">get_total_aging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.get_total_aging" title="Permalink to this definition"></a></dt>
<dd><p>Returns the total capacity life loss the battery has experienced so far.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Estimated cycle + calendar aging of cell/battery.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.get_true_power">
<span class="sig-name descname"><span class="pre">get_true_power</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.get_true_power" title="Permalink to this definition"></a></dt>
<dd><p>Returns the power in or out of the battery.</p>
<p>:param : None.
:return : Last power output of battery object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.load_pack_props">
<span class="sig-name descname"><span class="pre">load_pack_props</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.load_pack_props" title="Permalink to this definition"></a></dt>
<dd><p>Updates all properties from cell to pack level using.
Method used in ref Balogun Et. Al <a class="reference external" href="http://dx.doi.org/10.36227/techrxiv.23596725.v2">http://dx.doi.org/10.36227/techrxiv.23596725.v2</a> .
Uses initial properties/states to update from cell into pack properties for simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.nominal_pack_cap">
<span class="sig-name descname"><span class="pre">nominal_pack_cap</span></span><a class="headerlink" href="#charging_sim.batterypack.Battery.nominal_pack_cap" title="Permalink to this definition"></a></dt>
<dd><p>This will be set in :py:meth:battery_setup.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.save_sim_data">
<span class="sig-name descname"><span class="pre">save_sim_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.save_sim_data" title="Permalink to this definition"></a></dt>
<dd><p>Saves all relevant battery data over the given simulation. Usually called from the battery object
upon conclusion of simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>save_prefix</strong> (<em>str.</em>) – desired folder in which all the files will be saved.</p>
</dd>
</dl>
<p>:return : None, saves output files in the desired folder.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.state_eqn">
<span class="sig-name descname"><span class="pre">state_eqn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.state_eqn" title="Permalink to this definition"></a></dt>
<dd><p>Contains discretized state equations containing the battery dynamics at the pack-level;
ref here: G. L. Plett, Battery management systems, Volume I: Battery modeling. Artech House, 2015, vol. 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>append</strong> (<em>boolean</em>) – Decides if to track powers within the ::B battery object.</p></li>
<li><p><strong>current</strong> (<em>float</em>) – Current - current in amperes from controller to propagate state forward by one step.
append - defaults to True. This decides tracking of currents and power over time. Desirable for post-
optimization analyses.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None; appends current state into the state history vectors.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.thermal_dynamics">
<span class="sig-name descname"><span class="pre">thermal_dynamics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.thermal_dynamics" title="Permalink to this definition"></a></dt>
<dd><p>This models the battery’s thermal state. Updates internal and surface temperature of the battery.
Not available in this version.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.track_SOC">
<span class="sig-name descname"><span class="pre">track_SOC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SOC</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.track_SOC" title="Permalink to this definition"></a></dt>
<dd><p>Updates the states of charge state Vector of the battery.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>SOC - state of charge. This is a self-called function.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.update_capacity">
<span class="sig-name descname"><span class="pre">update_capacity</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.update_capacity" title="Permalink to this definition"></a></dt>
<dd><p>This is not true capacity but anticipated capacity based on linear model.
This will be deferred to controller. TO BE DEPRECATED.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.update_max_current">
<span class="sig-name descname"><span class="pre">update_max_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.update_max_current" title="Permalink to this definition"></a></dt>
<dd><p>Update the max allowable current of the battery - to be deprecated as it is not needed anymore.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.update_voltage">
<span class="sig-name descname"><span class="pre">update_voltage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">voltage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.update_voltage" title="Permalink to this definition"></a></dt>
<dd><p>TO BE DEPRECATED.
Updates the battery voltage, given the predicted voltage from controller.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.batterypack.Battery.visualize">
<span class="sig-name descname"><span class="pre">visualize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.batterypack.Battery.visualize" title="Permalink to this definition"></a></dt>
<dd><p>TO BE DEPRECATED.
Plots visualizations and save battery states desired by user.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>option - only uses one option right now.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.capacitor">
<span id="capacitor-module"></span><h2>Capacitor module<a class="headerlink" href="#module-charging_sim.capacitor" title="Permalink to this heading"></a></h2>
<p>This file hosts the class for capacitors. Future work</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.capacitor.Capacitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.capacitor.</span></span><span class="sig-name descname"><span class="pre">Capacitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.capacitor.Capacitor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

</section>
<section id="module-charging_sim.chargingStation">
<span id="charging-station-module"></span><h2>Charging Station module<a class="headerlink" href="#module-charging_sim.chargingStation" title="Permalink to this heading"></a></h2>
<p>Hosts the Charging Station class.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.chargingStation.</span></span><span class="sig-name descname"><span class="pre">ChargingStation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_evs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'idle'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The charging station class produces a load with a power factor parameter that determines its reactive
load contribution, if any. It also retains all information of all power injection at its grid node_name/bus.
It is initialized with its location, capacity, etc. This class ingests the battery, solar and controller modules
to which it is assigned.</p>
<p>A <cite>ChargingStation</cite> can have multiple charging stalls/ports, which contribute to its total capacity. The
<cite>ChargingStation</cite> class is responsible for managing the charging of all EVs connected to it. It is also
responsible for managing the charging of the battery and solar assets connected to it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage</strong> (<em>object</em>) – Storage object assigned to the charging station.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – </p></li>
<li><p><strong>controller</strong> (<em>object</em>) – Charging station controller object.</p></li>
<li><p><strong>solar</strong> (<em>object</em>) – Charging station solar object. Default is None.</p></li>
<li><p><strong>status</strong> (<em>str</em>) – Charging station status. Default ‘idle’.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.get_current_load">
<span class="sig-name descname"><span class="pre">get_current_load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.get_current_load" title="Permalink to this definition"></a></dt>
<dd><p>Returns the current load of the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Current load (kW) of the charging station.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.is_EV_arrived">
<span class="sig-name descname"><span class="pre">is_EV_arrived</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.is_EV_arrived" title="Permalink to this definition"></a></dt>
<dd><p>Checks if an EV has arrived at the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Boolean value indicating if an EV has arrived at the charging station.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.is_charging">
<span class="sig-name descname"><span class="pre">is_charging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.is_charging" title="Permalink to this definition"></a></dt>
<dd><p>Checks if the unit is charging.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Boolean value indicating if the unit is charging.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.load_charging_data">
<span class="sig-name descname"><span class="pre">load_charging_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.load_charging_data" title="Permalink to this definition"></a></dt>
<dd><p>Loads its own unique charging data to be used during simulation. In prior versions, this was done in
orchestrator.py. However now, new individual charging stations will load their own data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.save_sim_data">
<span class="sig-name descname"><span class="pre">save_sim_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.save_sim_data" title="Permalink to this definition"></a></dt>
<dd><p>Saves all relevant simulation data to csv files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>save_prefix</strong> – Path string to save the data from simulation.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.set_current_load">
<span class="sig-name descname"><span class="pre">set_current_load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.set_current_load" title="Permalink to this definition"></a></dt>
<dd><p>Sets the current load of the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>load</strong> – Load in kW.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.update_load">
<span class="sig-name descname"><span class="pre">update_load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">net_grid_load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.update_load" title="Permalink to this definition"></a></dt>
<dd><p>Updates the charging station loads, including DER assets. MPC mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>net_grid_load</strong> – Net load charging station pulls from the grid.</p></li>
<li><p><strong>ev_load</strong> – Electric Vehicle charging demand.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.update_load_oneshot">
<span class="sig-name descname"><span class="pre">update_load_oneshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">net_grid_load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.update_load_oneshot" title="Permalink to this definition"></a></dt>
<dd><p>Updates the charging station loads, including DER assets. Offline mode (Non-MPC).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>net_grid_load</strong> – Net load charging station pulls from the grid.</p></li>
<li><p><strong>ev_load</strong> – Electric Vehicle charging demand.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.update_status">
<span class="sig-name descname"><span class="pre">update_status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.update_status" title="Permalink to this definition"></a></dt>
<dd><p>Updates the current status of the EV charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStation.visualize">
<span class="sig-name descname"><span class="pre">visualize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStation.visualize" title="Permalink to this definition"></a></dt>
<dd><p>Visualizing charging station states.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>option</strong> – plotting option.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.chargingStation.</span></span><span class="sig-name descname"><span class="pre">ChargingStationCentralized</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_evs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'idle'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for charging stations with centralized Distributed Energy Resources (solar and storage).</p>
<p>The charging station class produces a load with a power factor parameter that determines its reactive
load contribution, if any. It also retains all information of all power injection at its grid node_name/bus.
It is initialized with its location, capacity, etc. This class ingests the battery, solar and controller modules
to which it is assigned.</p>
<p>A <cite>ChargingStation</cite> can have multiple charging stalls/ports, which contribute to its total capacity. The
<cite>ChargingStation</cite> class is responsible for managing the charging of all EVs connected to it. It is also
responsible for managing the charging of the battery and solar assets connected to it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage</strong> (<em>object</em>) – Storage object assigned to the charging station.</p></li>
<li><p><strong>config</strong> (<em>dict</em>) – </p></li>
<li><p><strong>controller</strong> (<em>object</em>) – Charging station controller object.</p></li>
<li><p><strong>solar</strong> (<em>object</em>) – Charging station solar object. Default is None.</p></li>
<li><p><strong>status</strong> (<em>str</em>) – Charging station status. Default ‘idle’.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.get_current_load">
<span class="sig-name descname"><span class="pre">get_current_load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.get_current_load" title="Permalink to this definition"></a></dt>
<dd><p>Returns the current load of the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Current load (kW) of the charging station.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.is_EV_arrived">
<span class="sig-name descname"><span class="pre">is_EV_arrived</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.is_EV_arrived" title="Permalink to this definition"></a></dt>
<dd><p>Checks if an EV has arrived at the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Boolean value indicating if an EV has arrived at the charging station.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.is_charging">
<span class="sig-name descname"><span class="pre">is_charging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.is_charging" title="Permalink to this definition"></a></dt>
<dd><p>Checks if the unit is charging.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Boolean value indicating if the unit is charging.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.load_charging_data">
<span class="sig-name descname"><span class="pre">load_charging_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.load_charging_data" title="Permalink to this definition"></a></dt>
<dd><p>Loads its own unique charging data to be used during simulation. In prior versions, this was done in
orchestrator.py. However now, new individual charging stations will load their own data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.save_sim_data">
<span class="sig-name descname"><span class="pre">save_sim_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.save_sim_data" title="Permalink to this definition"></a></dt>
<dd><p>Saves all relevant simulation data to csv files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>save_prefix</strong> – Path string to save the data from simulation.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.set_current_load">
<span class="sig-name descname"><span class="pre">set_current_load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.set_current_load" title="Permalink to this definition"></a></dt>
<dd><p>Sets the current load of the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>load</strong> – Load in kW.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.update_load">
<span class="sig-name descname"><span class="pre">update_load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">net_grid_load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.update_load" title="Permalink to this definition"></a></dt>
<dd><p>Updates the charging station loads, including DER assets. MPC mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>net_grid_load</strong> – Net load charging station pulls from the grid.</p></li>
<li><p><strong>ev_load</strong> – Electric Vehicle charging demand.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.update_load_oneshot">
<span class="sig-name descname"><span class="pre">update_load_oneshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">net_grid_load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.update_load_oneshot" title="Permalink to this definition"></a></dt>
<dd><p>Updates the charging station loads, including DER assets. Offline mode (Non-MPC).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>net_grid_load</strong> – Net load charging station pulls from the grid.</p></li>
<li><p><strong>ev_load</strong> – Electric Vehicle charging demand.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.update_status">
<span class="sig-name descname"><span class="pre">update_status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.update_status" title="Permalink to this definition"></a></dt>
<dd><p>Updates the current status of the EV charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.chargingStation.ChargingStationCentralized.visualize">
<span class="sig-name descname"><span class="pre">visualize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.chargingStation.ChargingStationCentralized.visualize" title="Permalink to this definition"></a></dt>
<dd><p>Visualizing charging station states.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>option</strong> – plotting option.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.clock">
<span id="clock-module"></span><h2>Clock module<a class="headerlink" href="#module-charging_sim.clock" title="Permalink to this heading"></a></h2>
<p>This module defines the clock class. This allows ease of temporal understanding of different timescales
within the simulation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.clock.Clock">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.clock.</span></span><span class="sig-name descname"><span class="pre">Clock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.clock.Clock" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class defines the clock for the simulation. It allows ease of temporal understanding of different timescales.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>dict</em>) – Configuration dictionary.</p>
</dd>
</dl>
<dl>
<dt>Derived attributes:</dt><dd><p>pf_dt: Powerflow timestep in seconds.</p>
<p>trans_dt: Transformer timestep in seconds.</p>
<p>battery_dt: Battery timestep in seconds.</p>
<p>dt: Clock timestep in seconds.</p>
<p>it: Iteration number (usually starts at 0).</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.clock.Clock.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.clock.Clock.reset" title="Permalink to this definition"></a></dt>
<dd><p>Reset the clock.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.clock.Clock.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.clock.Clock.update" title="Permalink to this definition"></a></dt>
<dd><p>Update the clock.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.controller">
<span id="controller-module"></span><h2>Controller module<a class="headerlink" href="#module-charging_sim.controller" title="Permalink to this heading"></a></h2>
<p><strong>Overview</strong></p>
<p>This file contains the controller classes used for DER optimization and control within EV-Ecosim</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.controller.MPC">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.controller.</span></span><span class="sig-name descname"><span class="pre">MPC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPC" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class uses an MPC control scheme for producing control currents to the BESS.</p>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPC.compute_control">
<span class="sig-name descname"><span class="pre">compute_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_vector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPC.compute_control" title="Permalink to this definition"></a></dt>
<dd><p>Optimization-based control actions are computed and passed to the battery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load</strong> – This is the power demand from the charging station.</p></li>
<li><p><strong>price_vector</strong> – This is usually the time of use (TOU) rate of the charging station.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>control_action - Current signals to control the DER system for arbitrage.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPC.get_battery_constraints">
<span class="sig-name descname"><span class="pre">get_battery_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPC.get_battery_constraints" title="Permalink to this definition"></a></dt>
<dd><p>Creates and updates the battery constraints required to be satisfied by the controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ev_load</strong> – This is the power demand from the charging station.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>storage_constraints - List of battery constraints to be respected.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPC.initialize_forecast_data">
<span class="sig-name descname"><span class="pre">initialize_forecast_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPC.initialize_forecast_data" title="Permalink to this definition"></a></dt>
<dd><p>loads history to be used for forecasting EV charging</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPC.load_battery_ocv">
<span class="sig-name descname"><span class="pre">load_battery_ocv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPC.load_battery_ocv" title="Permalink to this definition"></a></dt>
<dd><p>Learns the battery OCV Parameters from data and sets the relevant class attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPC.reset_load">
<span class="sig-name descname"><span class="pre">reset_load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPC.reset_load" title="Permalink to this definition"></a></dt>
<dd><p>This is done after one full day is done.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.controller.MPCCentralized">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.controller.</span></span><span class="sig-name descname"><span class="pre">MPCCentralized</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPCCentralized" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class uses an MPC control scheme for controlling the DERs. This method includes centralized
solar and storage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPCCentralized.compute_control">
<span class="sig-name descname"><span class="pre">compute_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_vector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPCCentralized.compute_control" title="Permalink to this definition"></a></dt>
<dd><p>Optimization-based control actions are computed and passed to the battery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load</strong> – This is the power demand from the charging station.</p></li>
<li><p><strong>price_vector</strong> – This is usually the time of use (TOU) rate of the charging station.</p></li>
</ul>
</dd>
<dt class="field-even">Return control_action<span class="colon">:</span></dt>
<dd class="field-even"><p>Current signals to control the DER system for arbitrage.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPCCentralized.get_battery_constraints">
<span class="sig-name descname"><span class="pre">get_battery_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPCCentralized.get_battery_constraints" title="Permalink to this definition"></a></dt>
<dd><p>Creates and updates the battery constraints required to be satisfied by the controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ev_load</strong> – This is the power demand from the charging station.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>storage_constraints - List of battery constraints to be respected.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPCCentralized.initialize_forecast_data">
<span class="sig-name descname"><span class="pre">initialize_forecast_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPCCentralized.initialize_forecast_data" title="Permalink to this definition"></a></dt>
<dd><p>loads history to be used for forecasting EV charging</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPCCentralized.load_battery_ocv">
<span class="sig-name descname"><span class="pre">load_battery_ocv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPCCentralized.load_battery_ocv" title="Permalink to this definition"></a></dt>
<dd><p>Learns the battery OCV Parameters from data and sets the relevant class attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.MPCCentralized.reset_load">
<span class="sig-name descname"><span class="pre">reset_load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.MPCCentralized.reset_load" title="Permalink to this definition"></a></dt>
<dd><p>This is done after one full day is done.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.controller.Oneshot">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.controller.</span></span><span class="sig-name descname"><span class="pre">Oneshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">96</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.Oneshot" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class uses an offline control scheme for producing control currents to the BESS.
This is non-MPC and cannot use state feedback in control simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – Configuration dictionary.</p></li>
<li><p><strong>storage</strong> – Storage (usually battery) module.</p></li>
<li><p><strong>solar</strong> – Solar module.</p></li>
<li><p><strong>num_steps</strong> – Number of steps.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.Oneshot.compute_control">
<span class="sig-name descname"><span class="pre">compute_control</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_vector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.Oneshot.compute_control" title="Permalink to this definition"></a></dt>
<dd><p>Optimization-based control actions are computed and passed to the DERs and Charging unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>load</strong> – This is the power demand from the charging station.</p></li>
<li><p><strong>price_vector</strong> – This is usually the time of use (TOU) rate of the charging station.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.Oneshot.get_battery_constraints">
<span class="sig-name descname"><span class="pre">get_battery_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.Oneshot.get_battery_constraints" title="Permalink to this definition"></a></dt>
<dd><p>Creates and updates the battery constraints required to be satisfied by the controller</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ev_load</strong> – Input power demand from the charging station.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of storage (battery) constraints to be respected.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.Oneshot.load_battery_ocv">
<span class="sig-name descname"><span class="pre">load_battery_ocv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.Oneshot.load_battery_ocv" title="Permalink to this definition"></a></dt>
<dd><p>Learns the battery OCV Parameters from data and sets the relevant class attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Param<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.controller.Oneshot.reset_load">
<span class="sig-name descname"><span class="pre">reset_load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.controller.Oneshot.reset_load" title="Permalink to this definition"></a></dt>
<dd><p>This is done after one full day is done.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.electricityPrices">
<span id="electricity-prices-module"></span><h2>Electricity prices module<a class="headerlink" href="#module-charging_sim.electricityPrices" title="Permalink to this heading"></a></h2>
<p><strong>Overview</strong>
This module contains the class that loads the electricity price data and structure used for sampling prices during
simulation.</p>
<p><strong>Details</strong></p>
<p>Based on the prices.json config file, this module will load the desired price TOU rate file that will be used in
optimization problem. The default is the PGE_BEV2_S rate file, which is valid for California, however users can load
their own TOU rate file. The prices are loaded into a numpy array and can be sampled from during simulation.
The prices are sampled based on the month of the year and the hour of the day.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.electricityPrices.PriceLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.electricityPrices.</span></span><span class="sig-name descname"><span class="pre">PriceLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.electricityPrices.PriceLoader" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class pre-loads prices and is used to sample prices that are used for optimization of EVSE profits/costs
during charging simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – Configuration dictionary for the price loader.</p></li>
<li><p><strong>path_prefix</strong> – This string path prefix is obtained first based on your repository location to set the</p></li>
</ul>
</dd>
</dl>
<p>correct path for obtaining the data.</p>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.electricityPrices.PriceLoader.downscale">
<span class="sig-name descname"><span class="pre">downscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_res</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_res</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.electricityPrices.PriceLoader.downscale" title="Permalink to this definition"></a></dt>
<dd><p>Downscales the price data into a finer resolution, similar to the downscaling method in Pandas.
Typically only used once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_res</strong> – Resolution of the input data.</p></li>
<li><p><strong>output_res</strong> – Resolution of the output data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None. Saves output data to a csv file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.electricityPrices.PriceLoader.get_prices">
<span class="sig-name descname"><span class="pre">get_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.electricityPrices.PriceLoader.get_prices" title="Permalink to this definition"></a></dt>
<dd><p>Returns time-of-use (TOU) rate prices from data. This assumes TOU rates do not change day-to-day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_idx</strong> (<em>int</em>) – Starting index from which to price vector will start.</p></li>
<li><p><strong>num_steps</strong> (<em>int</em>) – Cardinality of the price vector being returned.</p></li>
<li><p><strong>month</strong> (<em>int</em>) – Month for which the price vector will be obtained (for example, 1 - Jan, 12 - December).</p></li>
</ul>
</dd>
<dt class="field-even">Return price_vector<span class="colon">:</span></dt>
<dd class="field-even"><p>The TOU price vector, which is a numpy array.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.electricityPrices.PriceLoader.set_month_data">
<span class="sig-name descname"><span class="pre">set_month_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.electricityPrices.PriceLoader.set_month_data" title="Permalink to this definition"></a></dt>
<dd><p>Sets the month for which the prices will be obtained.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>month</strong> – Month to set the data to.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.node">
<span id="node-module"></span><h2>Node module<a class="headerlink" href="#module-charging_sim.node" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.node.Node">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.node.</span></span><span class="sig-name descname"><span class="pre">Node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">others</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">children</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.node.Node" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Node object class for defining relevant <cite>node_name</cite> for co-simulation. It helps organize centralized DER assets
within their respective grid locations. This is only used for centralized DER simulations and it is not used
for collocated EVSE and DER simulations.</p>
<p>For example, within the centralized simulation, if there are multiple secondary feeders connected to a single primary
feeder, then the primary feeder would be a <cite>node_name</cite> and the secondary feeders would be children of that
<cite>node_name</cite>. Thus, when power injections at each time step are calculated through optimization, the controller and
orchestrator knows the load at each child node, which is then aggregated to control the DER assets at the parent
node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the node_name.</p></li>
<li><p><strong>idx</strong> – Index of the node_name.</p></li>
<li><p><strong>storage</strong> – Storage object.</p></li>
<li><p><strong>solar</strong> – Solar object.</p></li>
<li><p><strong>controller</strong> – Controller object.</p></li>
<li><p><strong>children</strong> – List of children nodes.</p></li>
<li><p><strong>parent</strong> – Parent node.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.node.Node.add_child">
<span class="sig-name descname"><span class="pre">add_child</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.node.Node.add_child" title="Permalink to this definition"></a></dt>
<dd><p>Adds a child node_name to the current node_name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node</strong> – Node object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.node.Node.get_current_load">
<span class="sig-name descname"><span class="pre">get_current_load</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.node.Node.get_current_load" title="Permalink to this definition"></a></dt>
<dd><p>Returns the current load of the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Current load (kW) of the charging station.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.node.Node.save_sim_data">
<span class="sig-name descname"><span class="pre">save_sim_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.node.Node.save_sim_data" title="Permalink to this definition"></a></dt>
<dd><p>Saves all relevant simulation data to csv files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>save_prefix</strong> – Path string to save the data from simulation.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.node.Node.set_current_load">
<span class="sig-name descname"><span class="pre">set_current_load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.node.Node.set_current_load" title="Permalink to this definition"></a></dt>
<dd><p>Sets the current load of the charging station.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>load</strong> – Load in kW.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.node.Node.update_load">
<span class="sig-name descname"><span class="pre">update_load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">net_grid_load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ev_load</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.node.Node.update_load" title="Permalink to this definition"></a></dt>
<dd><p>Updates the node_name loads, including DER assets. MPC mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>net_grid_load</strong> – Net load charging station pulls from the grid.</p></li>
<li><p><strong>ev_load</strong> – Sum of all electric vehicle charging demand within that primary feeder node_name.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.optimization">
<span id="optimization-module"></span><h2>Optimization module<a class="headerlink" href="#module-charging_sim.optimization" title="Permalink to this heading"></a></h2>
<p>Contains the Optimization class, which is used by controller to solve the optimization problem.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.optimization.</span></span><span class="sig-name descname"><span class="pre">Optimization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objective_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">power_demand</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_res</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">battery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'GUROBI'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Constructor for the overall optimization problem solved by the optimization-based controller.</p>
<ul class="simple">
<li><p>Designed to include future cost functions such as transformer degradation and battery aging.</p></li>
<li><p>Limited to convex and Mixed Integer programs, depending on the selected solver.</p></li>
<li><p>Note, each desired solver must be installed separately on user’s PC for a successful run.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>objective_type</strong> – Type of objective problem being optimized.</p></li>
<li><p><strong>objective</strong> – CVXPY objective function object.</p></li>
<li><p><strong>controller</strong> – Controller object.</p></li>
<li><p><strong>power_demand</strong> – Power demand at the Charging Station.</p></li>
<li><p><strong>time_res</strong> – Time resolution of problem data.</p></li>
<li><p><strong>transformer</strong> – Transformer object (optional, not implemented yet).</p></li>
<li><p><strong>battery</strong> – Battery object.</p></li>
<li><p><strong>time</strong> – Time Counter.</p></li>
<li><p><strong>name</strong> – Optimization identifier.</p></li>
<li><p><strong>solar</strong> – Solar Object.</p></li>
<li><p><strong>solver</strong> (<em>str</em>) – Available backend solver to invoke (ECOS, MOSEK, GUROBI, etc.).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.add_demand_charge">
<span class="sig-name descname"><span class="pre">add_demand_charge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">charge</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.add_demand_charge" title="Permalink to this definition"></a></dt>
<dd><p>Including demand charge in the objective function (Deprecated).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>charge</strong> – Demand charge ($/kW).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.aggregate_constraints">
<span class="sig-name descname"><span class="pre">aggregate_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.aggregate_constraints" title="Permalink to this definition"></a></dt>
<dd><p>Aggregates all the constraints into one constraint list within the object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.build_battery_cost">
<span class="sig-name descname"><span class="pre">build_battery_cost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.build_battery_cost" title="Permalink to this definition"></a></dt>
<dd><p>Build battery cost (to be implemented in future version).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.build_emissions_cost">
<span class="sig-name descname"><span class="pre">build_emissions_cost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.build_emissions_cost" title="Permalink to this definition"></a></dt>
<dd><p>Builds emission cost to be included in the objective function (future work).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.build_transformer_cost">
<span class="sig-name descname"><span class="pre">build_transformer_cost</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.build_transformer_cost" title="Permalink to this definition"></a></dt>
<dd><p>Build Transformer cost (to be implemented in future version).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.get_battery_constraint">
<span class="sig-name descname"><span class="pre">get_battery_constraint</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.get_battery_constraint" title="Permalink to this definition"></a></dt>
<dd><p>Returns the list of battery constraints within the controller.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Battery constraints.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.get_constraints">
<span class="sig-name descname"><span class="pre">get_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.get_constraints" title="Permalink to this definition"></a></dt>
<dd><p>Returns the constraints list.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of all constraints within the problem.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.optimization.Optimization.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.optimization.Optimization.run" title="Permalink to this definition"></a></dt>
<dd><p>Runs an instance of the optimization problem.</p>
<dl class="field-list simple">
<dt class="field-odd">Return float<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optimal objective value.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.orchestrator">
<span id="orchestrator-module"></span><h2>Orchestrator module<a class="headerlink" href="#module-charging_sim.orchestrator" title="Permalink to this heading"></a></h2>
<p>This module hosts the <cite>ChargingSim</cite> class, in charge of orchestrating the entire simulation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.orchestrator.</span></span><span class="sig-name descname"><span class="pre">ChargingSim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_charging_sites</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_evs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1600</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_ev_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_ev_data_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_solar_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_solar_data_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centralized</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">central_der_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is the main orchestrator for the simulation class. It organizes the simulation and controls the propagation of
other objects’ states in a time sequential manner. It is in charge of orchestrating in both RHC/MPC or oneshot
(offline) modes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_charging_sites</strong> – Number of charging nodes within the secondary distribution network.</p></li>
<li><p><strong>solar</strong> (<em>bool</em>) – If the charging sites have solar PV or not.</p></li>
<li><p><strong>resolution</strong> (<em>int</em>) – Time resolution of the simulation.</p></li>
<li><p><strong>path_prefix</strong> (<em>str</em>) – Path string that helps ensure simulation can access proper folders within OS file organization.</p></li>
<li><p><strong>num_steps</strong> (<em>int</em>) – Number of steps per day. Default is 96 for 15 minute time resolution.</p></li>
<li><p><strong>month</strong> (<em>int</em>) – The month for which the simulation is run.</p></li>
<li><p><strong>num_evs</strong> (<em>int</em>) – Number of EVs to be simulated.</p></li>
<li><p><strong>custom_ev_data</strong> (<em>bool</em>) – If custom EV data is to be used.</p></li>
<li><p><strong>custom_ev_data_path</strong> (<em>str</em>) – Path to custom EV data.</p></li>
<li><p><strong>custom_solar_data</strong> (<em>bool</em>) – If custom solar data is to be used.</p></li>
<li><p><strong>custom_solar_data_path</strong> (<em>str</em>) – Path to custom solar data.</p></li>
<li><p><strong>centralized</strong> (<em>bool</em>) – If the DER is centralized or not.</p></li>
<li><p><strong>central_der_dict</strong> (<em>dict</em>) – Dictionary of DERs for centralized mode.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.create_battery_object">
<span class="sig-name descname"><span class="pre">create_battery_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.create_battery_object" title="Permalink to this definition"></a></dt>
<dd><p>Creates and stores all battery modules/objects in the network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idx</strong> – Battery identification index.</p></li>
<li><p><strong>node_name</strong> (<em>str</em>) – Name of node_name.</p></li>
<li><p><strong>controller</strong> – Controller assigned to the battery object.</p></li>
</ul>
</dd>
<dt class="field-even">Return (object)<span class="colon">:</span></dt>
<dd class="field-even"><p>Battery object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.create_charging_stations">
<span class="sig-name descname"><span class="pre">create_charging_stations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">power_nodes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.create_charging_stations" title="Permalink to this definition"></a></dt>
<dd><p>Creates the charging station objects within the power network (MPC mode).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>power_nodes</strong> (<em>list</em>) – List of buses/nodes which can host charging stations. It is a list of dicts.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.create_charging_stations_centralized">
<span class="sig-name descname"><span class="pre">create_charging_stations_centralized</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">charging_nodes_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.create_charging_stations_centralized" title="Permalink to this definition"></a></dt>
<dd><p>Creates charging stations for centralized DER shared within a distribution node_name. The centralized option is used
to study the value of centralization of DER within primary feeder nodes. For example if an EV Service Provider
owns a fleet of charging stations within a primary feeder node_name, then the DER can be centralized and shared
within that node to offset its power consumption.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>charging_nodes_list</strong> (<em>list</em><em>(</em><em>dict</em><em>)</em>) – List of charging node dicts necessary to configure simulation,
especially the node name and location to map charging station objects to the power network.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.create_charging_stations_oneshot">
<span class="sig-name descname"><span class="pre">create_charging_stations_oneshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">power_nodes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.create_charging_stations_oneshot" title="Permalink to this definition"></a></dt>
<dd><p>Creates the charging station objects within the power network (offline mode).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>power_nodes</strong> (<em>list</em>) – List of buses/nodes which can host charging stations.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.create_solar_object">
<span class="sig-name descname"><span class="pre">create_solar_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.create_solar_object" title="Permalink to this definition"></a></dt>
<dd><p>Creates a solar object using the solar class <code class="docutils literal notranslate"><span class="pre">charging_sim.solar</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>idx</strong> (<em>int</em>) – Solar object identifier.</p></li>
<li><p><strong>loc</strong> – Location of solar object within the grid.</p></li>
<li><p><strong>controller</strong> – Controller object of solar system.</p></li>
</ul>
</dd>
<dt class="field-even">Return object<span class="colon">:</span></dt>
<dd class="field-even"><p>Solar object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.get_action">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.get_action" title="Permalink to this definition"></a></dt>
<dd><p>Returns only the control current.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.get_charger_obj_by_loc">
<span class="sig-name descname"><span class="pre">get_charger_obj_by_loc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">loc</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.get_charger_obj_by_loc" title="Permalink to this definition"></a></dt>
<dd><p>Returns the charging station object at given location ‘loc’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>loc</strong> (<em>str</em>) – Location of charging station.</p>
</dd>
<dt class="field-even">Return object<span class="colon">:</span></dt>
<dd class="field-even"><p>Charging station object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.get_charging_sites">
<span class="sig-name descname"><span class="pre">get_charging_sites</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.get_charging_sites" title="Permalink to this definition"></a></dt>
<dd><p>Returns the charging station locations within the grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Return list locs<span class="colon">:</span></dt>
<dd class="field-odd"><p>Charging station locations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.initialize_aging_sim">
<span class="sig-name descname"><span class="pre">initialize_aging_sim</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.initialize_aging_sim" title="Permalink to this definition"></a></dt>
<dd><p>Initialize the battery aging object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.initialize_controllers">
<span class="sig-name descname"><span class="pre">initialize_controllers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.initialize_controllers" title="Permalink to this definition"></a></dt>
<dd><p>Assign charging controller to each EVSE.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.initialize_price_loader">
<span class="sig-name descname"><span class="pre">initialize_price_loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">month</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.initialize_price_loader" title="Permalink to this definition"></a></dt>
<dd><p>Loads the price loading module and sets the month to be simulated for memory-efficient sampling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>month</strong> (<em>int</em>) – Month to be simulated.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.load_battery_params">
<span class="sig-name descname"><span class="pre">load_battery_params</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.load_battery_params" title="Permalink to this definition"></a></dt>
<dd><p>This loads the battery params directly into the sim, so parameters will be the same for all
batteries unless otherwise specified. battery_config must be attributed to do this.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.load_config">
<span class="sig-name descname"><span class="pre">load_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.load_config" title="Permalink to this definition"></a></dt>
<dd><p>Loads all object configuration files and set the config attribute within the class. Walks through
the os files, finds the config JSON files, and loads them as the attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.load_results_summary">
<span class="sig-name descname"><span class="pre">load_results_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_path_prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.load_results_summary" title="Permalink to this definition"></a></dt>
<dd><p>Saves the simulation results to a specified path. It also plots some results if specified. The results are
saved in a folder with the name of the simulation scenario. The results are saved in a .csv file. The results
include the following: load, solar, battery power, voltages, rate Block, battery SOC, battery calendar aging,
battery cycle aging, battery SOH, cycles etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_path_prefix</strong> – Includes prefix to desired path for saving results.</p></li>
<li><p><strong>plot</strong> (<em>boolean</em>) – Decides if some results are plotted or not.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.multistep">
<span class="sig-name descname"><span class="pre">multistep</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.multistep" title="Permalink to this definition"></a></dt>
<dd><p>This is used oneshot offline simulation for any given month. It is much faster than the Receding Horizon Control
(RHC or MPC) mode and it used to propagate the states of all objects through the simulation horizon.</p>
<p>This assumes perfect load foresight, doing daily propagation for Charging Station sequentially within the power
grid.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.reset_loads">
<span class="sig-name descname"><span class="pre">reset_loads</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.reset_loads" title="Permalink to this definition"></a></dt>
<dd><p>Resets the loads at the different buses being tracked.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">power_nodes_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scenario</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.setup" title="Permalink to this definition"></a></dt>
<dd><p>This is done pre-simulation to ensure all scenarios are updated accordingly.
This method takes in a list of dicts with the following keys: <cite>node_name</cite>, <cite>L2</cite>, <cite>DCFC</cite>.
The setup accounts for the different modes of simulation. It also updates the scenario dict to match the
specifications of the given scenario.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>power_nodes_list</strong> (<em>list</em>) – List of buses dictionaries for which EVSE/Charging Station exists.</p></li>
<li><p><strong>scenario</strong> – Contains specifications for the scenario, such as battery capacity, c-rate, solar, etc.
See example <cite>user_input.json</cite> file for full specifications.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stepsize</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.step" title="Permalink to this definition"></a></dt>
<dd><p>This assumes perfect load foresight, doing daily propagation for Charging Station sequentially within the power
grid. This can easily be modified to include forecast errors and uncertainty.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stepsize</strong> (<em>int</em>) – Number of steps to take.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.step_centralized">
<span class="sig-name descname"><span class="pre">step_centralized</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stepsize</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.step_centralized" title="Permalink to this definition"></a></dt>
<dd><p>If mode is centralized DER (multiple charging stations connected to the same primary distribution feeder), then
this method is used to propagate the states of all objects through the simulation horizon. The price vector is
the same for all charging stations, but the load vector is different for each charging station. Making the price
vector the same is reasonable because it is more likely that the primary feeder is the same for all charging
stations and would exist in the same utility tariff zone or territory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stepsize</strong> (<em>int</em>) – Number of steps to take.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.update_scenario">
<span class="sig-name descname"><span class="pre">update_scenario</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.update_scenario" title="Permalink to this definition"></a></dt>
<dd><p>Updates the scenarios dicts to match specifications of a given scenario.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>scenario</strong> – The scenario dict to be modified, if given.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.orchestrator.ChargingSim.update_steps">
<span class="sig-name descname"><span class="pre">update_steps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.orchestrator.ChargingSim.update_steps" title="Permalink to this definition"></a></dt>
<dd><p>Updates for moving simulation forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>steps</strong> (<em>int</em>) – Number of steps to move forward.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.simulate">
<span id="simulate-module"></span><h2>Simulate module<a class="headerlink" href="#module-charging_sim.simulate" title="Permalink to this heading"></a></h2>
<p>This module runs the optimization offline without the power system or battery state feedback for each time-step.
This is done to save time. Once this is done, one can study the effects on the power system. Power system states are
propagated post optimization to fully characterize what would have occurred if in-situ optimization was done.</p>
<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.change_run_date">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">change_run_date</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.change_run_date" title="Permalink to this definition"></a></dt>
<dd><p>Changes the run date for the simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.create_results_folder">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">create_results_folder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.create_results_folder" title="Permalink to this definition"></a></dt>
<dd><p>Creates a results dir if one does not exist</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.create_temp_configs">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">create_temp_configs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.create_temp_configs" title="Permalink to this definition"></a></dt>
<dd><p>Creates temporary configuration files used by the simulator for running the app.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.get_repository_name">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">get_repository_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.get_repository_name" title="Permalink to this definition"></a></dt>
<dd><p>Helps obtain the current directory which houses the repository currently in.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.load_default_input">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">load_default_input</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.load_default_input" title="Permalink to this definition"></a></dt>
<dd><p>Loads the default user input skeleton.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.make_month_str">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">make_month_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">month_int</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.make_month_str" title="Permalink to this definition"></a></dt>
<dd><p>Makes a month string from the month integer. Adds 0 if the month is less than 10.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>month_int</strong> – 1 - January, 2 - February, etc.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>String of the month.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.simulate">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">simulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequential_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.simulate" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.simulate.validate_options">
<span class="sig-prename descclassname"><span class="pre">charging_sim.simulate.</span></span><span class="sig-name descname"><span class="pre">validate_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">front_input</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.simulate.validate_options" title="Permalink to this definition"></a></dt>
<dd><p>Validates the user-input options to ensure that the options selected matches the required workflow by the backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-charging_sim.solar">
<span id="solar-module"></span><h2>Solar module<a class="headerlink" href="#module-charging_sim.solar" title="Permalink to this heading"></a></h2>
<p>This module contains the Solar class. The solar class is used to simulate the solar power generation at a given site
by sampling Global Horizontal Irradiance (GHI) data from the dataset of the desired location.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.solar.Solar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.solar.</span></span><span class="sig-name descname"><span class="pre">Solar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.Solar" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class is used to simulate the solar power generation at a given site by sampling Global Horizontal Irradiance
and estimating the solar generation, given the solar nameplate capacity that can be modified it its configuration
file <cite>solar.json</cite>. It also contains the optimization variables for the solar system.</p>
<p>The solar power generation is estimated using the following equation:</p>
<div class="math notranslate nohighlight">
\[P_{solar} = \min(P_{rated}, \eta *  A * GHI).\]</div>
<p>Where <span class="math notranslate nohighlight">\(P_{solar}\)</span> is the solar power generation, <span class="math notranslate nohighlight">\(\eta\)</span> is the efficiency of the solar system,
<span class="math notranslate nohighlight">\(P_{rated}\)</span> is the solar nameplate capacity, <span class="math notranslate nohighlight">\(A\)</span> is the area of the solar panels, and <span class="math notranslate nohighlight">\(GHI\)</span> is
the Global Horizontal Irradiance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – Solar configuration dictionary.</p></li>
<li><p><strong>path_prefix</strong> – This string path prefix is obtained first based on your repository location to set the right path.</p></li>
<li><p><strong>controller</strong> – Controller object for making decisions on flow of power from energy devices.</p></li>
<li><p><strong>num_steps</strong> – Number of steps in the simulation.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.solar.Solar.downscale">
<span class="sig-name descname"><span class="pre">downscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_res</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_res</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.Solar.downscale" title="Permalink to this definition"></a></dt>
<dd><p>This is used only to initially downscale data to desired resolution</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.solar.Solar.get_constraints">
<span class="sig-name descname"><span class="pre">get_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.Solar.get_constraints" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.solar.Solar.get_power">
<span class="sig-name descname"><span class="pre">get_power</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">desired_shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(96,</span> <span class="pre">1)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.Solar.get_power" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.solar.Solar.get_solar_output">
<span class="sig-name descname"><span class="pre">get_solar_output</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.Solar.get_solar_output" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.solar.Solar.modify_res">
<span class="sig-name descname"><span class="pre">modify_res</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_res</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.Solar.modify_res" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.solar.Solar.update_history">
<span class="sig-name descname"><span class="pre">update_history</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.Solar.update_history" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.solar.main">
<span class="sig-prename descclassname"><span class="pre">charging_sim.solar.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.solar.main" title="Permalink to this definition"></a></dt>
<dd><p>THis is mainly to testing or generating new data purposes</p>
</dd></dl>

</section>
<section id="module-charging_sim.transformer">
<span id="transformer-module"></span><h2>Transformer module<a class="headerlink" href="#module-charging_sim.transformer" title="Permalink to this heading"></a></h2>
<p>Module for the transformer class. This module contains classes for simulating the thermal dynamics of transformers.</p>
<dl class="py class">
<dt class="sig sig-object py" id="charging_sim.transformer.OilTypeTransformer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">charging_sim.transformer.</span></span><span class="sig-name descname"><span class="pre">OilTypeTransformer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">global_clock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.transformer.OilTypeTransformer" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.transformer.OilTypeTransformer.plot_states">
<span class="sig-name descname"><span class="pre">plot_states</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.transformer.OilTypeTransformer.plot_states" title="Permalink to this definition"></a></dt>
<dd><p>Plot the transformer thermal states.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="charging_sim.transformer.OilTypeTransformer.thermal_dynamics">
<span class="sig-name descname"><span class="pre">thermal_dynamics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">power</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.transformer.OilTypeTransformer.thermal_dynamics" title="Permalink to this definition"></a></dt>
<dd><p>Propagate transformer state from previous timestep to current timestep (currently it is a minute resolution data
simulated in 10 seconds increment).
Nonlinear model from Swift et. Al (2001).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-charging_sim.utils">
<span id="utils"></span><h2>Utils<a class="headerlink" href="#module-charging_sim.utils" title="Permalink to this heading"></a></h2>
<p>Stores general configurations and general functions</p>
<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.utils.PGE_BEV2_S">
<span class="sig-prename descclassname"><span class="pre">charging_sim.utils.</span></span><span class="sig-name descname"><span class="pre">PGE_BEV2_S</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.utils.PGE_BEV2_S" title="Permalink to this definition"></a></dt>
<dd><p>Price schedule/TOU rate for PGE EVSE doc can be found here:</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.utils.add_power_profile_to_object">
<span class="sig-prename descclassname"><span class="pre">charging_sim.utils.</span></span><span class="sig-name descname"><span class="pre">add_power_profile_to_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">battery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">battery_power_profile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.utils.add_power_profile_to_object" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.utils.build_cost_PGE_BEV2S">
<span class="sig-prename descclassname"><span class="pre">charging_sim.utils.</span></span><span class="sig-name descname"><span class="pre">build_cost_PGE_BEV2S</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_prices_TOU</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">penalize_max_power</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_power_pen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.utils.build_cost_PGE_BEV2S" title="Permalink to this definition"></a></dt>
<dd><p>This will need to use a heuristic and take the average conservative estimate for gamma</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.utils.build_electricity_cost">
<span class="sig-prename descclassname"><span class="pre">charging_sim.utils.</span></span><span class="sig-name descname"><span class="pre">build_electricity_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy_prices_TOU</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">demand_charge</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.utils.build_electricity_cost" title="Permalink to this definition"></a></dt>
<dd><p>Need to update from home load right now; maybe this can be useful in future opt.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.utils.build_objective">
<span class="sig-prename descclassname"><span class="pre">charging_sim.utils.</span></span><span class="sig-name descname"><span class="pre">build_objective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">electricity_cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">battery_degradation_cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">emissions_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.utils.build_objective" title="Permalink to this definition"></a></dt>
<dd><p>Builds the objective function that we will minimize.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="charging_sim.utils.load_prices">
<span class="sig-prename descclassname"><span class="pre">charging_sim.utils.</span></span><span class="sig-name descname"><span class="pre">load_prices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_intervals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_vector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#charging_sim.utils.load_prices" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-left" title="Packages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="batt_sys_identification.html" class="btn btn-neutral float-right" title="Battery System Identification" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Emmanuel Balogun.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>